webpackJsonp([7],{epsA:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("mvHQ"),r=e.n(o),i=(e("3f40"),e("4qOc"),e("+cgv"),e("G0J2")),a=e("mtWM"),c=e.n(a),s=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["image","video"]],l=1e3,d={components:{quillEditor:i.quillEditor},data:function(){return{content:"",editorOption:{modules:{toolbar:s},theme:"snow",placeholder:"请输入正文"},datas:JSON.parse(r()([])),datasId:"",contentArray:[]}},methods:{onEditorBlur:function(t){for(var n={sectionId:this.datasId,sectionContent:this.content},e=0,o=0;o<this.contentArray.length;o++)if(this.contentArray[o].sectionId==n.sectionId){e=1;break}1==e?this.contentArray[o].sectionContent=n.sectionContent:this.contentArray.push(n),console.log(r()(this.contentArray))},onEditorFocus:function(t){},onEditorReady:function(t){},onEditorChange:function(t){t.quill;var n=t.html;t.text;this.content=n},append:function(t){var n=prompt("标题名","默认标题");if(null!=n){var e={id:l++,label:n,children:[]};t.children||this.$set(t,"children",[]),t.children.push(e)}},remove:function(t,n){var e=t.parent,o=e.data.children||e.data,r=o.findIndex(function(t){return t.id===n.id});o.splice(r,1)},revise:function(t,n){var e=prompt("标题名");""==e?this.remove(t,n):n.label=e},updateContent:function(t,n){this.content=n.sectionContent,this.datasId=n.sectionId},renderContent:function(t,n){var e=this,o=n.node,r=n.data;n.store;return t("span",{class:"custom-tree-node"},[t("el-button",{attrs:{type:"text"},style:"color:#636363",on:{click:function(){return e.updateContent(o,r)}}},[o.label]),t("span",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return e.append(r)}},style:"margin-left:100px"},["添加"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return e.remove(o,r)}},style:"float:right;margin-top:6px"},["删除"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return e.revise(o,r)}},style:"float:right;margin-top:6px"},["修改"])])])},returnUrl:function(){window.close()},savetree:function(){var t=this;this.onEditorBlur();var n=r()(this.datas),e=r()(this.contentArray);c()({url:"/section/update",data:n,params:{courseId:localStorage.getItem("courseIndex")},method:"Post",headers:{"Content-type":"application/json;charset=utf-8"}}).then(function(n){c()({url:"/section/updatecontent",data:e,method:"Post",headers:{"Content-type":"application/json;charset=utf-8"}}),t.$router.push("/Teaching/TSectionIndex")}).catch(function(t){console.log(t)})}},mounted:function(){var t=this;c()("/section/show",{params:{courseId:localStorage.getItem("courseIndex")},method:"Get"}).then(function(n){console.log(n.data),t.datas=n.data.data}).catch(function(t){console.log(t)})}},u={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"rich-text"}},[e("quill-editor",{ref:"myQuillEditor",staticClass:"editor",attrs:{options:t.editorOption},on:{focus:function(n){return t.onEditorFocus(n)},blur:function(n){return t.onEditorBlur(n)},change:function(n){return t.onEditorChange(n)}},model:{value:t.content,callback:function(n){t.content=n},expression:"content"}}),t._v(" "),e("div",{staticClass:"block"},[e("el-tree",{staticStyle:{width:"500px",border:"1px solid #d6d6d6",padding:"20px","margin-left":"10px"},attrs:{data:t.datas,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":t.renderContent}}),t._v(" "),e("div",{staticStyle:{"margin-top":"20px","margin-left":"80px"}},[e("el-button",{attrs:{type:"success"},on:{click:function(n){return t.savetree()}}},[t._v("保存")]),t._v(" "),e("el-button",{attrs:{type:"info"},on:{click:function(n){return t.returnUrl()}}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]};var p=e("VU/8")(d,u,!1,function(t){e("jnY5")},"data-v-d359db76",null);n.default=p.exports},jnY5:function(t,n){},mvHQ:function(t,n,e){t.exports={default:e("qkKv"),__esModule:!0}},qkKv:function(t,n,e){var o=e("FeBl"),r=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}}});
//# sourceMappingURL=7.f6d80e7f9baec5e3574c.js.map